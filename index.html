<div id="app">
  <div class="main-content">
    <div class="chat-container">
      <div class="header">
        <div class="user-settings" @click="toggleUserSettings">User Settings</div>
      </div>
      <div class="user-list">
        <div v-for="user in users" :key="user.username" class="user-list-item">
          {{ user.username + user.tag }}
          <button @click="removeUser(user)">Remove</button>
        </div>
      </div>
      <div class="messages">
        <div v-for="(message, index) in messages" :key="index" class="message">
          <div class="profile">
            <img :src="message.user.profilePicture" alt="Profile" style="width: 20px; height: 20px; margin-right: 5px; border-radius: 50%;">
            <span>{{ message.user.username + message.user.tag }}</span>
          </div>
          <p>{{ message.text }}</p>
          <span class="timestamp">{{ message.timestamp }}</span>
        </div>
      </div>
      <div class="input-container">
        <input v-model="messageInput" type="text" placeholder="Type your message">
        <button @click="toggleEmojiPicker">ğŸ˜Š</button>
        <div v-if="showEmojiPicker" class="emoji-picker">
          <button v-for="emoji in emojiList" :key="emoji" @click="selectEmoji(emoji)">{{ emoji }}</button>
        </div>
        <button @click="sendMessage">Send</button>
      </div>
      <!-- Move the profile section here -->
      <div class="profile" @click="startEditingProfile">
        <img :src="currentUser.profilePicture" alt="Profile" style="width: 30px; height: 30px; border-radius: 50%;">
        <div>
          <span>{{ currentUser.username }}</span>
          <span class="owner-tag">{{ currentUser.tag }}</span>
        </div>
      </div>
    </div>
    <div class="user-settings-popup" :class="{ 'active': showUserSettings }">
      <input v-model="editedProfile.username" type="text" placeholder="Enter username">
      <input type="file" @change="handleFileUpload">
      <button @click="saveProfileChanges">Save</button>
      <button class="cancel" @click="toggleUserSettings">Cancel</button>
    </div>
  </div>
</div>
